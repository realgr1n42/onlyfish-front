"use strict";(self.webpackChunkof_vue=self.webpackChunkof_vue||[]).push([[23358],{491246:function(t,e,n){n.d(e,{Z:function(){return d},k:function(){return u}});var s=n(268411),o=n(260831);const r="7";function i(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function a(t){return`${i(t)}${t.projectId}/envelope/`}function c(t,e){return(0,s.u4)({sentry_key:t.publicKey,sentry_version:r,...e&&{sentry_client:`${e.name}/${e.version}`}})}function d(t,e={}){const n="string"==typeof e?e:e.tunnel,s="string"!=typeof e&&e._metadata?e._metadata.sdk:void 0;return n||`${a(t)}?${c(t,s)}`}function u(t,e){const n=(0,o.AD)(t);if(!n)return"";const s=`${i(n)}embed/error-page/`;let r=`dsn=${(0,o.SB)(n)}`;for(const o in e)if("dsn"!==o&&"onClose"!==o)if("user"===o){const t=e.user;if(!t)continue;t.name&&(r+=`&name=${encodeURIComponent(t.name)}`),t.email&&(r+=`&email=${encodeURIComponent(t.email)}`)}else r+=`&${encodeURIComponent(o)}=${encodeURIComponent(e[o])}`;return`${s}?${r}`}},376482:function(t,e,n){n.d(e,{S:function(){return I},V:function(){return b}});var s=n(260831),o=n(317412),r=n(306936),i=n(973816),a=n(560690),c=n(728880),d=n(897492),u=n(491246),h=n(292220),p=n(371392),l=n(483741),_=n(586641),g=n(65836),f=n(142502),v=n(407058),m=n(475452),E=n(249475);const $="Not capturing exception because it's already been captured.";class b{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=(0,s.AD)(t.dsn):h.T&&o.vF.warn("No DSN provided, client will not send events."),this._dsn){const e=(0,u.Z)(this._dsn,t);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}}captureException(t,e,n){if((0,r.GR)(t))return void(h.T&&o.vF.log($));let s=e&&e.event_id;return this._process(this.eventFromException(t,e).then((t=>this._captureEvent(t,e,n))).then((t=>{s=t}))),s}captureMessage(t,e,n,s){let o=n&&n.event_id;const r=(0,i.NF)(t)?t:String(t),a=(0,i.sO)(t)?this.eventFromMessage(r,e,n):this.eventFromException(t,n);return this._process(a.then((t=>this._captureEvent(t,n,s))).then((t=>{o=t}))),o}captureEvent(t,e,n){if(e&&e.originalException&&(0,r.GR)(e.originalException))return void(h.T&&o.vF.log($));let s=e&&e.event_id;const i=undefined,a=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,e,a||n).then((t=>{s=t}))),s}captureSession(t){"string"!=typeof t.release?h.T&&o.vF.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),(0,v.qO)(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then((n=>e.flush(t).then((t=>n&&t))))):(0,a.XW)(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),t)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(e){return h.T&&o.vF.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const e=this._integrations[t.name];(0,g.qm)(this,t,this._integrations),e||(0,g.lc)(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=(0,p.V)(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of e.attachments||[])n=(0,c.W3)(n,(0,c.bm)(o,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(n);s&&s.then((e=>this.emit("afterSendEvent",t,e)),null)}sendSession(t){const e=(0,p.L)(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}recordDroppedEvent(t,e,n){if(this._options.sendClientReports){const s="number"==typeof n?n:1,r=`${t}:${e}`;h.T&&o.vF.log(`Recording outcome: "${r}"${s>1?` (${s} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+s}}captureAggregateMetrics(t){h.T&&o.vF.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const e=(0,f.Z)(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}on(t,e){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(e)}emit(t,...e){this._hooks[t]&&this._hooks[t].forEach((t=>t(...e)))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=(0,g.P$)(this,t),(0,g.lc)(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,e){let n=!1,s=!1;const o=e.exception&&e.exception.values;if(o){s=!0;for(const t of o){const e=t.mechanism;if(e&&!1===e.handled){n=!0;break}}}const r="ok"===t.status,i=undefined;(r&&0===t.errors||r&&n)&&((0,v.qO)(t,{...n&&{status:"crashed"},errors:t.errors||Number(s||n)}),this.captureSession(t))}_isClientDoneProcessing(t){return new a.T2((e=>{let n=0;const s=1,o=setInterval((()=>{0==this._numProcessing?(clearInterval(o),e(!0)):(n+=1,t&&n>=t&&(clearInterval(o),e(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(t,e,n,s=(0,_.rm)()){const o=this.getOptions(),r=Object.keys(this._integrations);return!e.integrations&&r.length>0&&(e.integrations=r),this.emit("preprocessEvent",t,e),(0,E.mG)(o,t,e,n,this,s).then((t=>{if(null===t)return t;const e={...s.getPropagationContext(),...n?n.getPropagationContext():void 0},o=undefined;if(!(t.contexts&&t.contexts.trace)&&e){const{traceId:s,spanId:o,parentSpanId:r,dsc:i}=e;t.contexts={trace:{trace_id:s,span_id:o,parent_span_id:r},...t.contexts};const a=i||(0,m.l)(s,this,n);t.sdkProcessingMetadata={dynamicSamplingContext:a,...t.sdkProcessingMetadata}}return t}))}_captureEvent(t,e={},n){return this._processEvent(t,e,n).then((t=>t.event_id),(t=>{if(h.T){const e=t;"log"===e.logLevel?o.vF.log(e.message):o.vF.warn(e)}}))}_processEvent(t,e,n){const s=this.getOptions(),{sampleRate:o}=s,r=k(t),i=P(t),c=t.type||"error",u=`before send for type \`${c}\``;if(i&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",t),(0,a.xg)(new d.U(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const h="replay_event"===c?"replay":c,p=undefined,l=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,e,n,l).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",h,t),new d.U("An event processor returned `null`, will not send event.","log");const o=undefined;if(e.data&&!0===e.data.__sentry__)return n;const r=undefined;return w(y(s,n,e),u)})).then((s=>{if(null===s){if(this.recordDroppedEvent("before_send",h,t),r){const e=undefined,n=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",n)}throw new d.U(`${u} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();if(!r&&o&&this._updateSessionFromEvent(o,s),r){const t=undefined,e=undefined,n=(s.sdkProcessingMetadata&&s.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(s.spans?s.spans.length:0);n>0&&this.recordDroppedEvent("before_send","span",n)}const i=s.transaction_info;if(r&&i&&s.transaction!==t.transaction){const t="custom";s.transaction_info={...i,source:t}}return this.sendEvent(s,e),s})).then(null,(t=>{if(t instanceof d.U)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new d.U(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}_process(t){this._numProcessing++,t.then((t=>(this._numProcessing--,t)),(t=>(this._numProcessing--,t)))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,(t=>{h.T&&o.vF.error("Error while sending event:",t)}));h.T&&o.vF.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map((e=>{const[n,s]=e.split(":");return{reason:n,category:s,quantity:t[e]}}))}}function w(t,e){const n=`${e} must return \`null\` or a valid event.`;if((0,i.Qg)(t))return t.then((t=>{if(!(0,i.Qd)(t)&&null!==t)throw new d.U(n);return t}),(t=>{throw new d.U(`${e} rejected with ${t}`)}));if(!(0,i.Qd)(t)&&null!==t)throw new d.U(n);return t}function y(t,e,n){const{beforeSend:s,beforeSendTransaction:o}=t;if(P(e)&&s)return s(e,n);if(k(e)&&o){if(e.spans){const t=e.spans.length;e.sdkProcessingMetadata={...e.sdkProcessingMetadata,spanCountBeforeProcessing:t}}return o(e,n)}return e}function P(t){return void 0===t.type}function k(t){return"transaction"===t.type}function I(t){const e=(0,l.KU)();e&&e.addEventProcessor&&e.addEventProcessor(t)}},92967:function(t,e,n){n.d(e,{U:function(){return s}});const s="production"},292220:function(t,e,n){n.d(e,{T:function(){return s}});const s="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__}}]);